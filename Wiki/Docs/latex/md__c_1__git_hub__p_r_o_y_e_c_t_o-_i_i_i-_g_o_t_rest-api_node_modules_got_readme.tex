 ~\newline
 ~\newline
  ~\newline
 ~\newline
 ~\newline
 

Huge thanks to \href{https://moxy.studio}{\texttt{ }} for sponsoring me! 

 ~\newline
 ~\newline
 

\begin{quote}
Simplified H\+T\+TP requests \end{quote}


\href{https://travis-ci.org/sindresorhus/got}{\texttt{ }} \href{https://coveralls.io/github/sindresorhus/got?branch=master}{\texttt{ }} \href{https://npmjs.com/got}{\texttt{ }} \href{https://packagephobia.now.sh/result?p=got}{\texttt{ }}

Got is a human-\/friendly and powerful H\+T\+TP request library.

It was created because the popular \href{https://github.com/request/request}{\texttt{ {\ttfamily request}}} package is bloated\+: \href{https://packagephobia.now.sh/result?p=request}{\texttt{ }}

Got is for Node.\+js. For browsers, we recommend \href{https://github.com/sindresorhus/ky}{\texttt{ Ky}}.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1387}{}\doxysubsection{Highlights}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1387}

\begin{DoxyItemize}
\item \href{\#api}{\texttt{ Promise \& stream A\+PI}}
\item \href{\#aborting-the-request}{\texttt{ Request cancelation}}
\item \href{\#cache-adapters}{\texttt{ R\+FC compliant caching}}
\item \href{\#followredirect}{\texttt{ Follows redirects}}
\item \href{\#retry}{\texttt{ Retries on failure}}
\item \href{\#onuploadprogress-progress}{\texttt{ Progress events}}
\item \href{\#decompress}{\texttt{ Handles gzip/deflate}}
\item \href{\#timeout}{\texttt{ Timeout handling}}
\item \href{\#errors}{\texttt{ Errors with metadata}}
\item \href{\#json}{\texttt{ J\+S\+ON mode}}
\item \href{\#url}{\texttt{ W\+H\+A\+T\+WG U\+RL support}}
\item \href{\#hooks}{\texttt{ Hooks}}
\item \href{\#instances}{\texttt{ Instances with custom defaults}}
\item \href{advanced-creation.md\#merging-instances}{\texttt{ Composable}}
\item \href{\#useelectronnet}{\texttt{ Electron support}}
\item \href{https://github.com/sindresorhus/got/network/dependents}{\texttt{ Used by $\sim$2000 packages and $\sim$500K repos}}
\item Actively maintained
\end{DoxyItemize}

Moving from Request?

\href{\#comparison}{\texttt{ See how Got compares to other H\+T\+TP libraries}}\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1388}{}\doxysubsection{Install}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1388}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm install got}
\end{DoxyCode}


\href{https://www.patreon.com/sindresorhus}{\texttt{  }}\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1389}{}\doxysubsection{Usage}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1389}

\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    try \{}
\DoxyCodeLine{        const response = await got('sindresorhus.com');}
\DoxyCodeLine{        console.log(response.body);}
\DoxyCodeLine{        //=> '<!doctype html> ...'}
\DoxyCodeLine{    \} catch (error) \{}
\DoxyCodeLine{        console.log(error.response.body);}
\DoxyCodeLine{        //=> 'Internal server error ...'}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\})();}
\end{DoxyCode}


\doxysubparagraph*{Streams}

\`{}\`{}`js const fs = require(\textquotesingle{}fs'); const got = require(\textquotesingle{}got\textquotesingle{});

got.\+stream(\textquotesingle{}sindresorhus.\+com\textquotesingle{}).pipe(fs.\+create\+Write\+Stream(\textquotesingle{}index.\+html\textquotesingle{}));

// For P\+O\+ST, P\+UT, and P\+A\+T\+CH methods {\ttfamily got.\+stream} returns a {\ttfamily stream.\+Writable} fs.\+create\+Read\+Stream(\textquotesingle{}index.\+html\textquotesingle{}).pipe(got.\+stream.\+post(\textquotesingle{}sindresorhus.\+com\textquotesingle{})); \`{}\`{}\`{}\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1390}{}\doxysubsubsection{A\+PI}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1390}
It\textquotesingle{}s a {\ttfamily G\+ET} request by default, but can be changed by using different methods or in the {\ttfamily options}.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1391}{}\doxyparagraph{got(url, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1391}
Returns a Promise for a \href{\#response}{\texttt{ {\ttfamily response} object}} or a \href{\#streams-1}{\texttt{ stream}} if {\ttfamily options.\+stream} is set to true.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1392}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1392}%
\doxysubparagraph*{url}

Type\+: {\ttfamily string} {\ttfamily Object}

The U\+RL to request, as a string, a \href{https://nodejs.org/api/https.html\#https_https_request_options_callback}{\texttt{ {\ttfamily https.\+request} options object}}, or a \href{https://nodejs.org/api/url.html\#url_class_url}{\texttt{ W\+H\+A\+T\+WG {\ttfamily U\+RL}}}.

Properties from {\ttfamily options} will override properties in the parsed {\ttfamily url}.

If no protocol is specified, it will default to {\ttfamily https}.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1393}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1393}%
\doxysubparagraph*{options}

Type\+: {\ttfamily Object}

Any of the \href{https://nodejs.org/api/https.html\#https_https_request_options_callback}{\texttt{ {\ttfamily https.\+request}}} options.

\doxysubparagraph*{base\+Url}

Type\+: {\ttfamily string} {\ttfamily Object}

When specified, {\ttfamily url} will be prepended by {\ttfamily base\+Url}.~\newline
 If you specify an absolute U\+RL, it will skip the {\ttfamily base\+Url}.

Very useful when used with {\ttfamily got.\+extend()} to create niche-\/specific Got instances.

Can be a string or a \href{https://nodejs.org/api/url.html\#url_class_url}{\texttt{ W\+H\+A\+T\+WG {\ttfamily U\+RL}}}.

Slash at the end of {\ttfamily base\+Url} and at the beginning of the {\ttfamily url} argument is optional\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{await got('hello', \{baseUrl: 'https://example.com/v1'\});}
\DoxyCodeLine{//=> 'https://example.com/v1/hello'}
\DoxyCodeLine{}
\DoxyCodeLine{await got('/hello', \{baseUrl: 'https://example.com/v1/'\});}
\DoxyCodeLine{//=> 'https://example.com/v1/hello'}
\DoxyCodeLine{}
\DoxyCodeLine{await got('/hello', \{baseUrl: 'https://example.com/v1'\});}
\DoxyCodeLine{//=> 'https://example.com/v1/hello'}
\end{DoxyCode}


\doxysubparagraph*{headers}

Type\+: {\ttfamily Object}~\newline
 Default\+: {\ttfamily \{\}}

Request headers.

Existing headers will be overwritten. Headers set to {\ttfamily null} will be omitted.

\doxysubparagraph*{stream}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily false}

Returns a {\ttfamily Stream} instead of a {\ttfamily Promise}. This is equivalent to calling {\ttfamily got.\+stream(url, \mbox{[}options\mbox{]})}.

\doxysubparagraph*{body}

Type\+: {\ttfamily string} {\ttfamily Buffer} {\ttfamily stream.\+Readable} \href{https://github.com/form-data/form-data}{\texttt{ {\ttfamily form-\/data} instance}}

{\bfseries{Note\+:}} If you provide this option, {\ttfamily got.\+stream()} will be read-\/only.

The body that will be sent with a {\ttfamily P\+O\+ST} request.

If present in {\ttfamily options} and {\ttfamily options.\+method} is not set, {\ttfamily options.\+method} will be set to {\ttfamily P\+O\+ST}.

The {\ttfamily content-\/length} header will be automatically set if {\ttfamily body} is a {\ttfamily string} / {\ttfamily Buffer} / {\ttfamily fs.\+create\+Read\+Stream} instance / \href{https://github.com/form-data/form-data}{\texttt{ {\ttfamily form-\/data} instance}}, and {\ttfamily content-\/length} and {\ttfamily transfer-\/encoding} are not manually set in {\ttfamily options.\+headers}.

\doxysubparagraph*{cookie\+Jar}

Type\+: \href{https://github.com/salesforce/tough-cookie\#cookiejar}{\texttt{ {\ttfamily tough.\+Cookie\+Jar} instance}}

{\bfseries{Note\+:}} If you provide this option, {\ttfamily options.\+headers.\+cookie} will be overridden.

Cookie support. You don\textquotesingle{}t have to care about parsing or how to store them. \href{\#cookies}{\texttt{ Example.}}

\doxysubparagraph*{encoding}

Type\+: {\ttfamily string} {\ttfamily null}~\newline
 Default\+: `\textquotesingle{}utf8'\`{}

\href{https://nodejs.org/api/buffer.html\#buffer_buffers_and_character_encodings}{\texttt{ Encoding}} to be used on {\ttfamily set\+Encoding} of the response data. If {\ttfamily null}, the body is returned as a \href{https://nodejs.org/api/buffer.html}{\texttt{ {\ttfamily Buffer}}} (binary data).

\doxysubparagraph*{form}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily false}

{\bfseries{Note\+:}} If you provide this option, {\ttfamily got.\+stream()} will be read-\/only. {\bfseries{Note\+:}} {\ttfamily body} must be a plain object. It will be converted to a query string using \href{https://nodejs.org/api/url.html\#url_constructor_new_urlsearchparams_obj}{\texttt{ {\ttfamily (new U\+R\+L\+Search\+Params(object)).to\+String()}}}.

If set to {\ttfamily true} and {\ttfamily Content-\/\+Type} header is not set, it will be set to {\ttfamily application/x-\/www-\/form-\/urlencoded}.

\doxysubparagraph*{json}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily false}

{\bfseries{Note\+:}} If you use {\ttfamily got.\+stream()}, this option will be ignored. {\bfseries{Note\+:}} {\ttfamily body} must be a plain object or array and will be stringified.

If set to {\ttfamily true} and {\ttfamily Content-\/\+Type} header is not set, it will be set to {\ttfamily application/json}.

Parse response body with {\ttfamily J\+S\+O\+N.\+parse} and set {\ttfamily accept} header to {\ttfamily application/json}. If used in conjunction with the {\ttfamily form} option, the {\ttfamily body} will the stringified as querystring and the response parsed as J\+S\+ON.

\doxysubparagraph*{query}

Type\+: {\ttfamily string} {\ttfamily Object$<$string, string$\vert$number$>$} \href{https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams}{\texttt{ {\ttfamily U\+R\+L\+Search\+Params}}}

Query string that will be added to the request U\+RL. This will override the query string in {\ttfamily url}.

If you need to pass in an array, you can do it using a {\ttfamily U\+R\+L\+Search\+Params} instance\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{}
\DoxyCodeLine{const query = new URLSearchParams([['key', 'a'], ['key', 'b']]);}
\DoxyCodeLine{}
\DoxyCodeLine{got('https://example.com', \{query\});}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(query.toString());}
\DoxyCodeLine{//=> 'key=a\&key=b'}
\end{DoxyCode}


And if you need a different array format, you could use the \href{https://github.com/sindresorhus/query-string}{\texttt{ {\ttfamily query-\/string}}} package\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const queryString = require('query-\/string');}
\DoxyCodeLine{}
\DoxyCodeLine{const query = queryString.stringify(\{key: ['a', 'b']\}, \{arrayFormat: 'bracket'\});}
\DoxyCodeLine{}
\DoxyCodeLine{got('https://example.com', \{query\});}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(query);}
\DoxyCodeLine{//=> 'key[]=a\&key[]=b'}
\end{DoxyCode}


\doxysubparagraph*{timeout}

Type\+: {\ttfamily number} {\ttfamily Object}

Milliseconds to wait for the server to end the response before aborting the request with \href{\#gottimeouterror}{\texttt{ {\ttfamily got.\+Timeout\+Error}}} error (a.\+k.\+a. {\ttfamily request} property). By default, there\textquotesingle{}s no timeout.

This also accepts an {\ttfamily object} with the following fields to constrain the duration of each phase of the request lifecycle\+:


\begin{DoxyItemize}
\item {\ttfamily lookup} starts when a socket is assigned and ends when the hostname has been resolved. Does not apply when using a Unix domain socket.
\item {\ttfamily connect} starts when {\ttfamily lookup} completes (or when the socket is assigned if lookup does not apply to the request) and ends when the socket is connected.
\item {\ttfamily secure\+Connect} starts when {\ttfamily connect} completes and ends when the handshaking process completes (H\+T\+T\+PS only).
\item {\ttfamily socket} starts when the socket is connected. See \href{https://nodejs.org/api/http.html\#http_request_settimeout_timeout_callback}{\texttt{ request.\+set\+Timeout}}.
\item {\ttfamily response} starts when the request has been written to the socket and ends when the response headers are received.
\item {\ttfamily send} starts when the socket is connected and ends with the request has been written to the socket.
\item {\ttfamily request} starts when the request is initiated and ends when the response\textquotesingle{}s end event fires.
\end{DoxyItemize}

\doxysubparagraph*{retry}

Type\+: {\ttfamily number} {\ttfamily Object}~\newline
 Default\+:
\begin{DoxyItemize}
\item retries\+: {\ttfamily 2}
\item methods\+: {\ttfamily G\+ET} {\ttfamily P\+UT} {\ttfamily H\+E\+AD} {\ttfamily D\+E\+L\+E\+TE} {\ttfamily O\+P\+T\+I\+O\+NS} {\ttfamily T\+R\+A\+CE}
\item status\+Codes\+: \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408}{\texttt{ {\ttfamily 408}}} \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413}{\texttt{ {\ttfamily 413}}} \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429}{\texttt{ {\ttfamily 429}}} \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500}{\texttt{ {\ttfamily 500}}} \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502}{\texttt{ {\ttfamily 502}}} \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503}{\texttt{ {\ttfamily 503}}} \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504}{\texttt{ {\ttfamily 504}}}
\item max\+Retry\+After\+: {\ttfamily undefined}
\item error\+Codes\+: {\ttfamily E\+T\+I\+M\+E\+D\+O\+UT} {\ttfamily E\+C\+O\+N\+N\+R\+E\+S\+ET} {\ttfamily E\+A\+D\+D\+R\+I\+N\+U\+SE} {\ttfamily E\+C\+O\+N\+N\+R\+E\+F\+U\+S\+ED} {\ttfamily E\+P\+I\+PE} {\ttfamily E\+N\+O\+T\+F\+O\+U\+ND} {\ttfamily E\+N\+E\+T\+U\+N\+R\+E\+A\+CH} {\ttfamily E\+A\+I\+\_\+\+A\+G\+A\+IN}
\end{DoxyItemize}

An object representing {\ttfamily retries}, {\ttfamily methods}, {\ttfamily status\+Codes}, {\ttfamily max\+Retry\+After} and {\ttfamily error\+Codes} fields for the time until retry, allowed methods, allowed status codes, maximum \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After}{\texttt{ {\ttfamily Retry-\/\+After}}} time and allowed error codes.

If {\ttfamily max\+Retry\+After} is set to {\ttfamily undefined}, it will use {\ttfamily options.\+timeout}.~\newline
 If \href{https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After}{\texttt{ {\ttfamily Retry-\/\+After}}} header is greater than {\ttfamily max\+Retry\+After}, it will cancel the request.

Delays between retries counts with function {\ttfamily 1000 $\ast$ Math.\+pow(2, retry) + Math.\+random() $\ast$ 100}, where {\ttfamily retry} is attempt number (starts from 1).

The {\ttfamily retries} property can be a {\ttfamily number} or a {\ttfamily function} with {\ttfamily retry} and {\ttfamily error} arguments. The function must return a delay in milliseconds ({\ttfamily 0} return value cancels retry).

By default, it retries {\itshape only} on the specified methods, status codes, and on these network errors\+:
\begin{DoxyItemize}
\item {\ttfamily E\+T\+I\+M\+E\+D\+O\+UT}\+: One of the \href{\#timeout}{\texttt{ timeout}} limits were reached.
\item {\ttfamily E\+C\+O\+N\+N\+R\+E\+S\+ET}\+: Connection was forcibly closed by a peer.
\item {\ttfamily E\+A\+D\+D\+R\+I\+N\+U\+SE}\+: Could not bind to any free port.
\item {\ttfamily E\+C\+O\+N\+N\+R\+E\+F\+U\+S\+ED}\+: Connection was refused by the server.
\item {\ttfamily E\+P\+I\+PE}\+: The remote side of the stream being written has been closed.
\item {\ttfamily E\+N\+O\+T\+F\+O\+U\+ND}\+: Couldn\textquotesingle{}t resolve the hostname to an IP address.
\item {\ttfamily E\+N\+E\+T\+U\+N\+R\+E\+A\+CH}\+: No internet connection.
\item {\ttfamily E\+A\+I\+\_\+\+A\+G\+A\+IN}\+: D\+NS lookup timed out.
\end{DoxyItemize}

\doxysubparagraph*{follow\+Redirect}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

Defines if redirect responses should be followed automatically.

Note that if a {\ttfamily 303} is sent by the server in response to any request type ({\ttfamily P\+O\+ST}, {\ttfamily D\+E\+L\+E\+TE}, etc.), Got will automatically request the resource pointed to in the location header via {\ttfamily G\+ET}. This is in accordance with \href{https://tools.ietf.org/html/rfc7231\#section-6.4.4}{\texttt{ the spec}}.

\doxysubparagraph*{decompress}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

Decompress the response automatically. This will set the {\ttfamily accept-\/encoding} header to {\ttfamily gzip, deflate} unless you set it yourself.

If this is disabled, a compressed response is returned as a {\ttfamily Buffer}. This may be useful if you want to handle decompression yourself or stream the raw compressed data.

\doxysubparagraph*{cache}

Type\+: {\ttfamily Object}~\newline
 Default\+: {\ttfamily false}

\href{\#cache-adapters}{\texttt{ Cache adapter instance}} for storing cached data.

\doxysubparagraph*{request}

Type\+: {\ttfamily Function}~\newline
 Default\+: {\ttfamily http.\+request} {\ttfamily https.\+request} $\ast$(depending on the protocol)$\ast$

Custom request function. The main purpose of this is to \href{\#experimental-http2-support}{\texttt{ support H\+T\+T\+P2 using a wrapper}}.

\doxysubparagraph*{use\+Electron\+Net}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily false}

When used in Electron, Got will use \href{https://electronjs.org/docs/api/net/}{\texttt{ {\ttfamily electron.\+net}}} instead of the Node.\+js {\ttfamily http} module. According to the Electron docs, it should be fully compatible, but it\textquotesingle{}s not entirely. See \href{https://github.com/sindresorhus/got/issues/443}{\texttt{ \#443}} and \href{https://github.com/sindresorhus/got/issues/461}{\texttt{ \#461}}.

\doxysubparagraph*{throw\+Http\+Errors}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

Determines if a {\ttfamily got.\+H\+T\+T\+P\+Error} is thrown for error responses (non-\/2xx status codes).

If this is disabled, requests that encounter an error status code will be resolved with the {\ttfamily response} instead of throwing. This may be useful if you are checking for resource availability and are expecting error responses.

\doxysubparagraph*{agent}

Same as the \href{https://nodejs.org/api/http.html\#http_http_request_url_options_callback}{\texttt{ {\ttfamily agent} option}} for {\ttfamily http.\+request}, but with an extra feature\+:

If you require different agents for different protocols, you can pass a map of agents to the {\ttfamily agent} option. This is necessary because a request to one protocol might redirect to another. In such a scenario, Got will switch over to the right protocol agent for you.


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const HttpAgent = require('agentkeepalive');}
\DoxyCodeLine{const \{HttpsAgent\} = HttpAgent;}
\DoxyCodeLine{}
\DoxyCodeLine{got('sindresorhus.com', \{}
\DoxyCodeLine{    agent: \{}
\DoxyCodeLine{        http: new HttpAgent(),}
\DoxyCodeLine{        https: new HttpsAgent()}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\});}
\end{DoxyCode}


\doxysubparagraph*{hooks}

Type\+: {\ttfamily Object$<$string, Function\mbox{[}\mbox{]}$>$}

Hooks allow modifications during the request lifecycle. Hook functions may be async and are run serially.

\doxysubparagraph*{hooks.\+init}

Type\+: {\ttfamily Function\mbox{[}\mbox{]}}~\newline
 Default\+: {\ttfamily \mbox{[}\mbox{]}}

Called with plain \href{\#options}{\texttt{ request options}}, right before their normalization. This is especially useful in conjunction with \href{\#instances}{\texttt{ {\ttfamily got.\+extend()}}} and \`{}got.create()\`{} when the input needs custom handling.

See the \href{migration-guides.md\#breaking-changes}{\texttt{ Request migration guide}} for an example.

{\bfseries{Note}}\+: This hook must be synchronous!

\doxysubparagraph*{hooks.\+before\+Request}

Type\+: {\ttfamily Function\mbox{[}\mbox{]}}~\newline
 Default\+: {\ttfamily \mbox{[}\mbox{]}}

Called with \href{source/normalize-arguments.js}{\texttt{ normalized}} \href{\#options}{\texttt{ request options}}. Got will make no further changes to the request before it is sent. This is especially useful in conjunction with \href{\#instances}{\texttt{ {\ttfamily got.\+extend()}}} and \`{}got.create()\`{} when you want to create an A\+PI client that, for example, uses H\+M\+A\+C-\/signing.

See the \href{\#aws}{\texttt{ A\+WS section}} for an example.

{\bfseries{Note\+:}} If you modify the {\ttfamily body} you will need to modify the {\ttfamily content-\/length} header too, because it has already been computed and assigned.

\doxysubparagraph*{hooks.\+before\+Redirect}

Type\+: {\ttfamily Function\mbox{[}\mbox{]}}~\newline
 Default\+: {\ttfamily \mbox{[}\mbox{]}}

Called with \href{source/normalize-arguments.js}{\texttt{ normalized}} \href{\#options}{\texttt{ request options}}. Got will make no further changes to the request. This is especially useful when you want to avoid dead sites. Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{}
\DoxyCodeLine{got('example.com', \{}
\DoxyCodeLine{    hooks: \{}
\DoxyCodeLine{        beforeRedirect: [}
\DoxyCodeLine{            options => \{}
\DoxyCodeLine{                if (options.hostname === 'deadSite') \{}
\DoxyCodeLine{                    options.hostname = 'fallbackSite';}
\DoxyCodeLine{                \}}
\DoxyCodeLine{            \}}
\DoxyCodeLine{        ]}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\});}
\end{DoxyCode}


\doxysubparagraph*{hooks.\+before\+Retry}

Type\+: {\ttfamily Function\mbox{[}\mbox{]}}~\newline
 Default\+: {\ttfamily \mbox{[}\mbox{]}}

Called with \href{source/normalize-arguments.js}{\texttt{ normalized}} \href{\#options}{\texttt{ request options}}, the error and the retry count. Got will make no further changes to the request. This is especially useful when some extra work is required before the next try. Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{}
\DoxyCodeLine{got('example.com', \{}
\DoxyCodeLine{    hooks: \{}
\DoxyCodeLine{        beforeRetry: [}
\DoxyCodeLine{            (options, error, retryCount) => \{}
\DoxyCodeLine{                if (error.statusCode === 413) \{ // Payload too large}
\DoxyCodeLine{                    options.body = getNewBody();}
\DoxyCodeLine{                \}}
\DoxyCodeLine{            \}}
\DoxyCodeLine{        ]}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\});}
\end{DoxyCode}


\doxysubparagraph*{hooks.\+after\+Response}

Type\+: {\ttfamily Function\mbox{[}\mbox{]}}~\newline
 Default\+: {\ttfamily \mbox{[}\mbox{]}}

Called with \href{\#response}{\texttt{ response object}} and a retry function.

Each function should return the response. This is especially useful when you want to refresh an access token. Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{}
\DoxyCodeLine{const instance = got.extend(\{}
\DoxyCodeLine{    hooks: \{}
\DoxyCodeLine{        afterResponse: [}
\DoxyCodeLine{            (response, retryWithMergedOptions) => \{}
\DoxyCodeLine{                if (response.statusCode === 401) \{ // Unauthorized}
\DoxyCodeLine{                    const updatedOptions = \{}
\DoxyCodeLine{                        headers: \{}
\DoxyCodeLine{                            token: getNewToken() // Refresh the access token}
\DoxyCodeLine{                        \}}
\DoxyCodeLine{                    \};}
\DoxyCodeLine{}
\DoxyCodeLine{                    // Save for further requests}
\DoxyCodeLine{                    instance.defaults.options = got.mergeOptions(instance.defaults.options, updatedOptions);}
\DoxyCodeLine{}
\DoxyCodeLine{                    // Make a new retry}
\DoxyCodeLine{                    return retryWithMergedOptions(updatedOptions);}
\DoxyCodeLine{                \}}
\DoxyCodeLine{}
\DoxyCodeLine{                // No changes otherwise}
\DoxyCodeLine{                return response;}
\DoxyCodeLine{            \}}
\DoxyCodeLine{        ]}
\DoxyCodeLine{    \},}
\DoxyCodeLine{    mutableDefaults: true}
\DoxyCodeLine{\});}
\end{DoxyCode}


\doxysubparagraph*{hooks.\+before\+Error}

Type\+: {\ttfamily Function\mbox{[}\mbox{]}}~\newline
 Default\+: {\ttfamily \mbox{[}\mbox{]}}

Called with an {\ttfamily Error} instance. The error is passed to the hook right before it\textquotesingle{}s thrown. This is especially useful when you want to have more detailed errors.

{\bfseries{Note}}\+: Errors thrown while normalizing input options are thrown directly and not part of this hook.


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got'); }
\DoxyCodeLine{}
\DoxyCodeLine{got('api.github.com/some-\/endpoint', \{   }
\DoxyCodeLine{    hooks: \{    }
\DoxyCodeLine{        onError: [  }
\DoxyCodeLine{            error => \{  }
\DoxyCodeLine{                const \{response\} = error;   }
\DoxyCodeLine{                if (response \&\& response.body) \{    }
\DoxyCodeLine{                    error.name = 'GitHubError'; }
\DoxyCodeLine{                    error.message = `\$\{response.body.message\} (\$\{error.statusCode\})`;   }
\DoxyCodeLine{                \}}
\DoxyCodeLine{}
\DoxyCodeLine{                return error;   }
\DoxyCodeLine{            \}   }
\DoxyCodeLine{        ]   }
\DoxyCodeLine{    \}   }
\DoxyCodeLine{\}); }
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1394}{}\doxyparagraph{Response}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1394}
The response object will typically be a \href{https://nodejs.org/api/http.html\#http_class_http_incomingmessage}{\texttt{ Node.\+js H\+T\+TP response stream}}, however, if returned from the cache it will be a \href{https://github.com/lukechilds/responselike}{\texttt{ response-\/like object}} which behaves in the same way.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1395}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1395}%
\doxysubparagraph*{request}

Type\+: {\ttfamily Object}

{\bfseries{Note\+:}} This is not a \href{https://nodejs.org/api/http.html\#http_class_http_clientrequest}{\texttt{ http.\+Client\+Request}}.


\begin{DoxyItemize}
\item {\ttfamily got\+Options} -\/ The options that were set on this request.
\end{DoxyItemize}

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1396}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1396}%
\doxysubparagraph*{body}

Type\+: {\ttfamily string} {\ttfamily Object} $\ast$(depending on {\ttfamily options.\+json})$\ast$

The result of the request.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1397}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1397}%
\doxysubparagraph*{url}

Type\+: {\ttfamily string}

The request U\+RL or the final U\+RL after redirects.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1398}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1398}%
\doxysubparagraph*{request\+Url}

Type\+: {\ttfamily string}

The original request U\+RL.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1399}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1399}%
\doxysubparagraph*{timings}

Type\+: {\ttfamily Object}

The object contains the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily start} -\/ Time when the request started.
\item {\ttfamily socket} -\/ Time when a socket was assigned to the request.
\item {\ttfamily lookup} -\/ Time when the D\+NS lookup finished.
\item {\ttfamily connect} -\/ Time when the socket successfully connected.
\item {\ttfamily upload} -\/ Time when the request finished uploading.
\item {\ttfamily response} -\/ Time when the request fired the {\ttfamily response} event.
\item {\ttfamily end} -\/ Time when the response fired the {\ttfamily end} event.
\item {\ttfamily error} -\/ Time when the request fired the {\ttfamily error} event.
\item {\ttfamily phases}
\begin{DoxyItemize}
\item {\ttfamily wait} -\/ {\ttfamily timings.\+socket -\/ timings.\+start}
\item {\ttfamily dns} -\/ {\ttfamily timings.\+lookup -\/ timings.\+socket}
\item {\ttfamily tcp} -\/ {\ttfamily timings.\+connect -\/ timings.\+lookup}
\item {\ttfamily request} -\/ {\ttfamily timings.\+upload -\/ timings.\+connect}
\item {\ttfamily first\+Byte} -\/ {\ttfamily timings.\+response -\/ timings.\+upload}
\item {\ttfamily download} -\/ {\ttfamily timings.\+end -\/ timings.\+response}
\item {\ttfamily total} -\/ {\ttfamily timings.\+end -\/ timings.\+start} or {\ttfamily timings.\+error -\/ timings.\+start}
\end{DoxyItemize}
\end{DoxyItemize}

{\bfseries{Note\+:}} The time is a {\ttfamily number} representing the milliseconds elapsed since the U\+N\+IX epoch.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1400}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1400}%
\doxysubparagraph*{from\+Cache}

Type\+: {\ttfamily boolean}

Whether the response was retrieved from the cache.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1401}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1401}%
\doxysubparagraph*{redirect\+Urls}

Type\+: {\ttfamily Array}

The redirect U\+R\+Ls.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1402}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1402}%
\doxysubparagraph*{retry\+Count}

Type\+: {\ttfamily number}

The number of times the request was retried.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1403}{}\doxyparagraph{Streams}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1403}
{\bfseries{Note\+:}} Progress events, redirect events and request/response events can also be used with promises.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1404}{}\doxyparagraph{got.\+stream(url, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1404}
Sets {\ttfamily options.\+stream} to {\ttfamily true}.

Returns a \href{https://nodejs.org/api/stream.html\#stream_class_stream_duplex}{\texttt{ duplex stream}} with additional events\+:

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1405}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1405}%
\doxysubparagraph*{.on(\textquotesingle{}request\textquotesingle{}, request)}

{\ttfamily request} event to get the request object of the request.

{\bfseries{Tip\+:}} You can use {\ttfamily request} event to abort request\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{got.stream('github.com')}
\DoxyCodeLine{    .on('request', request => setTimeout(() => request.abort(), 50));}
\end{DoxyCode}


\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1406}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1406}%
\doxysubparagraph*{.on(\textquotesingle{}response\textquotesingle{}, response)}

The {\ttfamily response} event to get the response object of the final request.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1407}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1407}%
\doxysubparagraph*{.on(\textquotesingle{}redirect\textquotesingle{}, response, next\+Options)}

The {\ttfamily redirect} event to get the response object of a redirect. The second argument is options for the next request to the redirect location.

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1408}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1408}%
\doxysubparagraph*{.on(\textquotesingle{}upload\+Progress\textquotesingle{}, progress)}

\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1409}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1409}%
\doxysubparagraph*{.on(\textquotesingle{}download\+Progress\textquotesingle{}, progress)}

Progress events for uploading (sending a request) and downloading (receiving a response). The {\ttfamily progress} argument is an object like\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{    percent: 0.1,}
\DoxyCodeLine{    transferred: 1024,}
\DoxyCodeLine{    total: 10240}
\DoxyCodeLine{\}}
\end{DoxyCode}


If it\textquotesingle{}s not possible to retrieve the body size (can happen when streaming), {\ttfamily total} will be {\ttfamily null}.


\begin{DoxyCode}{0}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    const response = await got('sindresorhus.com')}
\DoxyCodeLine{        .on('downloadProgress', progress => \{}
\DoxyCodeLine{            // Report download progress}
\DoxyCodeLine{        \})}
\DoxyCodeLine{        .on('uploadProgress', progress => \{}
\DoxyCodeLine{            // Report upload progress}
\DoxyCodeLine{        \});}
\DoxyCodeLine{}
\DoxyCodeLine{    console.log(response);}
\DoxyCodeLine{\})();}
\end{DoxyCode}


\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1410}%
\Hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1410}%
\doxysubparagraph*{.on(\textquotesingle{}error\textquotesingle{}, error, body, response)}

The {\ttfamily error} event emitted in case of a protocol error (like {\ttfamily E\+N\+O\+T\+F\+O\+U\+ND} etc.) or status error (4xx or 5xx). The second argument is the body of the server response in case of status error. The third argument is a response object.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1411}{}\doxyparagraph{got.\+get(url, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1411}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1412}{}\doxyparagraph{got.\+post(url, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1412}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1413}{}\doxyparagraph{got.\+put(url, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1413}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1414}{}\doxyparagraph{got.\+patch(url, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1414}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1415}{}\doxyparagraph{got.\+head(url, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1415}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1416}{}\doxyparagraph{got.\+delete(url, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1416}
Sets {\ttfamily options.\+method} to the method name and makes a request.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1417}{}\doxysubsubsection{Instances}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1417}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1418}{}\doxyparagraph{got.\+extend(\mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1418}
Configure a new {\ttfamily got} instance with default {\ttfamily options}. The {\ttfamily options} are merged with the parent instance\textquotesingle{}s {\ttfamily defaults.\+options} using \href{\#gotmergeoptionsparentoptions-newoptions}{\texttt{ {\ttfamily got.\+merge\+Options}}}. You can access the resolved options with the {\ttfamily .defaults} property on the instance.


\begin{DoxyCode}{0}
\DoxyCodeLine{const client = got.extend(\{}
\DoxyCodeLine{    baseUrl: 'https://example.com',}
\DoxyCodeLine{    headers: \{}
\DoxyCodeLine{        'x-\/unicorn': 'rainbow'}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{client.get('/demo');}
\DoxyCodeLine{}
\DoxyCodeLine{/* HTTP Request =>}
\DoxyCodeLine{ * GET /demo HTTP/1.1}
\DoxyCodeLine{ * Host: example.com}
\DoxyCodeLine{ * x-\/unicorn: rainbow}
\DoxyCodeLine{ */}
\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    const client = got.extend(\{}
\DoxyCodeLine{        baseUrl: 'httpbin.org',}
\DoxyCodeLine{        headers: \{}
\DoxyCodeLine{            'x-\/foo': 'bar'}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    \});}
\DoxyCodeLine{    const \{headers\} = (await client.get('/headers', \{json: true\})).body;}
\DoxyCodeLine{    //=> headers['x-\/foo'] === 'bar'}
\DoxyCodeLine{}
\DoxyCodeLine{    const jsonClient = client.extend(\{}
\DoxyCodeLine{        json: true,}
\DoxyCodeLine{        headers: \{}
\DoxyCodeLine{            'x-\/baz': 'qux'}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    \});}
\DoxyCodeLine{    const \{headers: headers2\} = (await jsonClient.get('/headers')).body;}
\DoxyCodeLine{    //=> headers2['x-\/foo'] === 'bar'}
\DoxyCodeLine{    //=> headers2['x-\/baz'] === 'qux'}
\DoxyCodeLine{\})();}
\end{DoxyCode}


{\bfseries{Tip\+:}} Need more control over the behavior of Got? Check out the \`{}got.create()\`{}.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1419}{}\doxyparagraph{got.\+merge\+Options(parent\+Options, new\+Options)}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1419}
Extends parent options. Avoid using \href{https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\#Spread_in_object_literals}{\texttt{ object spread}} as it doesn\textquotesingle{}t work recursively\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const a = \{headers: \{cat: 'meow', wolf: ['bark', 'wrrr']\}\};}
\DoxyCodeLine{const b = \{headers: \{cow: 'moo', wolf: ['auuu']\}\};}
\DoxyCodeLine{}
\DoxyCodeLine{\{...a, ...b\}            // => \{headers: \{cow: 'moo', wolf: ['auuu']\}\}}
\DoxyCodeLine{got.mergeOptions(a, b)  // => \{headers: \{cat: 'meow', cow: 'moo', wolf: ['auuu']\}\}}
\end{DoxyCode}


Options are deeply merged to a new object. The value of each key is determined as follows\+:


\begin{DoxyItemize}
\item If the new property is set to {\ttfamily undefined}, it keeps the old one.
\item If the parent property is an instance of {\ttfamily U\+RL} and the new value is a {\ttfamily string} or {\ttfamily U\+RL}, a new U\+RL instance is created\+: \href{https://developer.mozilla.org/en-US/docs/Web/API/URL/URL\#Syntax}{\texttt{ {\ttfamily new U\+R\+L(new, parent)}}}.
\item If the new property is a plain {\ttfamily Object}\+:
\begin{DoxyItemize}
\item If the parent property is a plain {\ttfamily Object} too, both values are merged recursively into a new {\ttfamily Object}.
\item Otherwise, only the new value is deeply cloned.
\end{DoxyItemize}
\item If the new property is an {\ttfamily Array}, it overwrites the old one with a deep clone of the new property.
\item Otherwise, the new value is assigned to the key.
\end{DoxyItemize}\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1420}{}\doxyparagraph{got.\+defaults}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1420}
Type\+: {\ttfamily Object}

The default Got options.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1421}{}\doxysubsection{Errors}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1421}
Each error contains {\ttfamily host}, {\ttfamily hostname}, {\ttfamily method}, {\ttfamily path}, {\ttfamily protocol}, {\ttfamily url} and {\ttfamily got\+Options} properties to make debugging easier.

In Promise mode, the {\ttfamily response} is attached to the error.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1422}{}\doxyparagraph{got.\+Cache\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1422}
When a cache method fails, for example, if the database goes down or there\textquotesingle{}s a filesystem error.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1423}{}\doxyparagraph{got.\+Request\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1423}
When a request fails. Contains a {\ttfamily code} property with error class code, like {\ttfamily E\+C\+O\+N\+N\+R\+E\+F\+U\+S\+ED}.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1424}{}\doxyparagraph{got.\+Read\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1424}
When reading from response stream fails.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1425}{}\doxyparagraph{got.\+Parse\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1425}
When {\ttfamily json} option is enabled, server response code is 2xx, and {\ttfamily J\+S\+O\+N.\+parse} fails. Includes {\ttfamily status\+Code} and {\ttfamily status\+Message} properties.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1426}{}\doxyparagraph{got.\+H\+T\+T\+P\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1426}
When the server response code is not 2xx. Includes {\ttfamily body}, {\ttfamily status\+Code}, {\ttfamily status\+Message}, and {\ttfamily redirect\+Urls} properties.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1427}{}\doxyparagraph{got.\+Max\+Redirects\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1427}
When the server redirects you more than ten times. Includes a {\ttfamily status\+Code}, {\ttfamily status\+Message}, and {\ttfamily redirect\+Urls} property which is an array of the U\+R\+Ls Got was redirected to before giving up.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1428}{}\doxyparagraph{got.\+Unsupported\+Protocol\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1428}
When given an unsupported protocol.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1429}{}\doxyparagraph{got.\+Cancel\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1429}
When the request is aborted with {\ttfamily .cancel()}.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1430}{}\doxyparagraph{got.\+Timeout\+Error}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1430}
When the request is aborted due to a \href{\#timeout}{\texttt{ timeout}}. Includes an {\ttfamily event} property.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1431}{}\doxysubsection{Aborting the request}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1431}
The promise returned by Got has a \href{https://github.com/sindresorhus/p-cancelable}{\texttt{ {\ttfamily .cancel()}}} method which when called, aborts the request.

\`{}\`{}\`{}js (async () =$>$ \{ const request = got(url, options);

// …

// In another part of the code if (something) \{ request.\+cancel(); \}

// …

try \{ await request; \} catch (error) \{ if (request.\+is\+Canceled) \{ // Or {\ttfamily error instanceof got.\+Cancel\+Error} // Handle cancelation \}

// Handle other errors \} \})(); 
\begin{DoxyCode}{0}
\DoxyCodeLine{<a name="cache-\/adapters"></a>}
\DoxyCodeLine{\#\# Cache}
\DoxyCodeLine{}
\DoxyCodeLine{Got implements [RFC 7234](http://httpwg.org/specs/rfc7234.html) compliant HTTP caching which works out of the box in-\/memory and is easily pluggable with a wide range of storage adapters. Fresh cache entries are served directly from the cache, and stale cache entries are revalidated with `If-\/None-\/Match`/`If-\/Modified-\/Since` headers. You can read more about the underlying cache behavior in the [`cacheable-\/request` documentation](https://github.com/lukechilds/cacheable-\/request).}
\DoxyCodeLine{}
\DoxyCodeLine{You can use the JavaScript `Map` type as an in-\/memory cache:}
\DoxyCodeLine{}
\DoxyCodeLine{```js}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const map = new Map();}
\DoxyCodeLine{}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{        let response = await got('sindresorhus.com', \{cache: map\});}
\DoxyCodeLine{        console.log(response.fromCache);}
\DoxyCodeLine{        //=> false}
\DoxyCodeLine{}
\DoxyCodeLine{        response = await got('sindresorhus.com', \{cache: map\});}
\DoxyCodeLine{        console.log(response.fromCache);}
\DoxyCodeLine{        //=> true}
\DoxyCodeLine{\})();}
\end{DoxyCode}


Got uses \href{https://github.com/lukechilds/keyv}{\texttt{ Keyv}} internally to support a wide range of storage adapters. For something more scalable you could use an \href{https://github.com/lukechilds/keyv\#official-storage-adapters}{\texttt{ official Keyv storage adapter}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm install @keyv/redis}
\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const KeyvRedis = require('@keyv/redis');}
\DoxyCodeLine{}
\DoxyCodeLine{const redis = new KeyvRedis('redis://user:pass@localhost:6379');}
\DoxyCodeLine{}
\DoxyCodeLine{got('sindresorhus.com', \{cache: redis\});}
\end{DoxyCode}


Got supports anything that follows the Map A\+PI, so it\textquotesingle{}s easy to write your own storage adapter or use a third-\/party solution.

For example, the following are all valid storage adapters\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const storageAdapter = new Map();}
\DoxyCodeLine{// Or}
\DoxyCodeLine{const storageAdapter = require('./my-\/storage-\/adapter');}
\DoxyCodeLine{// Or}
\DoxyCodeLine{const QuickLRU = require('quick-\/lru');}
\DoxyCodeLine{const storageAdapter = new QuickLRU(\{maxSize: 1000\});}
\DoxyCodeLine{}
\DoxyCodeLine{got('sindresorhus.com', \{cache: storageAdapter\});}
\end{DoxyCode}


View the \href{https://github.com/lukechilds/keyv}{\texttt{ Keyv docs}} for more information on how to use storage adapters.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1432}{}\doxysubsection{Proxies}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1432}
You can use the \href{https://github.com/koichik/node-tunnel}{\texttt{ {\ttfamily tunnel}}} package with the {\ttfamily agent} option to work with proxies\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const tunnel = require('tunnel');}
\DoxyCodeLine{}
\DoxyCodeLine{got('sindresorhus.com', \{}
\DoxyCodeLine{    agent: tunnel.httpOverHttp(\{}
\DoxyCodeLine{        proxy: \{}
\DoxyCodeLine{            host: 'localhost'}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    \})}
\DoxyCodeLine{\});}
\end{DoxyCode}


Check out \href{https://github.com/np-maintain/global-tunnel}{\texttt{ {\ttfamily global-\/tunnel}}} if you want to configure proxy support for all H\+T\+T\+P/\+H\+T\+T\+PS traffic in your app.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1433}{}\doxysubsection{Cookies}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1433}
You can use the \href{https://github.com/salesforce/tough-cookie}{\texttt{ {\ttfamily tough-\/cookie}}} package\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const \{CookieJar\} = require('tough-\/cookie');}
\DoxyCodeLine{}
\DoxyCodeLine{const cookieJar = new CookieJar();}
\DoxyCodeLine{cookieJar.setCookie('foo=bar', 'https://www.google.com');}
\DoxyCodeLine{}
\DoxyCodeLine{got('google.com', \{cookieJar\});}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1434}{}\doxysubsection{Form data}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1434}
You can use the \href{https://github.com/form-data/form-data}{\texttt{ {\ttfamily form-\/data}}} package to create P\+O\+ST request with form data\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const fs = require('fs');}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const FormData = require('form-\/data');}
\DoxyCodeLine{const form = new FormData();}
\DoxyCodeLine{}
\DoxyCodeLine{form.append('my\_file', fs.createReadStream('/foo/bar.jpg'));}
\DoxyCodeLine{}
\DoxyCodeLine{got.post('google.com', \{}
\DoxyCodeLine{    body: form}
\DoxyCodeLine{\});}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1435}{}\doxysubsection{O\+Auth}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1435}
You can use the \href{https://github.com/ddo/oauth-1.0a}{\texttt{ {\ttfamily oauth-\/1.\+0a}}} package to create a signed O\+Auth request\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const crypto  = require('crypto');}
\DoxyCodeLine{const OAuth = require('oauth-\/1.0a');}
\DoxyCodeLine{}
\DoxyCodeLine{const oauth = OAuth(\{}
\DoxyCodeLine{    consumer: \{}
\DoxyCodeLine{        key: process.env.CONSUMER\_KEY,}
\DoxyCodeLine{        secret: process.env.CONSUMER\_SECRET}
\DoxyCodeLine{    \},}
\DoxyCodeLine{    signature\_method: 'HMAC-\/SHA1',}
\DoxyCodeLine{    hash\_function: (baseString, key) => crypto.createHmac('sha1', key).update(baseString).digest('base64')}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{const token = \{}
\DoxyCodeLine{    key: process.env.ACCESS\_TOKEN,}
\DoxyCodeLine{    secret: process.env.ACCESS\_TOKEN\_SECRET}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const url = 'https://api.twitter.com/1.1/statuses/home\_timeline.json';}
\DoxyCodeLine{}
\DoxyCodeLine{got(url, \{}
\DoxyCodeLine{    headers: oauth.toHeader(oauth.authorize(\{url, method: 'GET'\}, token)),}
\DoxyCodeLine{    json: true}
\DoxyCodeLine{\});}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1436}{}\doxysubsection{Unix Domain Sockets}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1436}
Requests can also be sent via \href{http://serverfault.com/questions/124517/whats-the-difference-between-unix-socket-and-tcp-ip-socket}{\texttt{ unix domain sockets}}. Use the following U\+RL scheme\+: {\ttfamily P\+R\+O\+T\+O\+C\+OL\+://unix\+:S\+O\+C\+K\+ET\+:P\+A\+TH}.


\begin{DoxyItemize}
\item {\ttfamily P\+R\+O\+T\+O\+C\+OL} -\/ {\ttfamily http} or {\ttfamily https} $\ast$(optional)$\ast$
\item {\ttfamily S\+O\+C\+K\+ET} -\/ Absolute path to a unix domain socket, for example\+: {\ttfamily /var/run/docker.sock}
\item {\ttfamily P\+A\+TH} -\/ Request path, for example\+: {\ttfamily /v2/keys}
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{got('http://unix:/var/run/docker.sock:/containers/json');}
\DoxyCodeLine{}
\DoxyCodeLine{// Or without protocol (HTTP by default)}
\DoxyCodeLine{got('unix:/var/run/docker.sock:/containers/json');}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1437}{}\doxysubsection{A\+WS}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1437}
Requests to A\+WS services need to have their headers signed. This can be accomplished by using the \href{https://www.npmjs.com/package/aws4}{\texttt{ {\ttfamily aws4}}} package. This is an example for querying an \href{https://docs.aws.amazon.com/apigateway/api-reference/signing-requests/}{\texttt{ \char`\"{}\+A\+P\+I Gateway\char`\"{}}} with a signed request.


\begin{DoxyCode}{0}
\DoxyCodeLine{const AWS = require('aws-\/sdk');}
\DoxyCodeLine{const aws4 = require('aws4');}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{}
\DoxyCodeLine{const chain = new AWS.CredentialProviderChain();}
\DoxyCodeLine{}
\DoxyCodeLine{// Create a Got instance to use relative paths and signed requests}
\DoxyCodeLine{const awsClient = got.extend(\{}
\DoxyCodeLine{    baseUrl: 'https://<api-\/id>.execute-\/api.<api-\/region>.amazonaws.com/<stage>/',}
\DoxyCodeLine{    hooks: \{}
\DoxyCodeLine{        beforeRequest: [}
\DoxyCodeLine{            async options => \{}
\DoxyCodeLine{                const credentials = await chain.resolvePromise();}
\DoxyCodeLine{                aws4.sign(options, credentials);}
\DoxyCodeLine{            \}}
\DoxyCodeLine{        ]}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{const response = await awsClient('endpoint/path', \{}
\DoxyCodeLine{    // Request-\/specific options}
\DoxyCodeLine{\});}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1438}{}\doxysubsection{Testing}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1438}
You can test your requests by using the \href{https://github.com/node-nock/nock}{\texttt{ {\ttfamily nock}}} package to mock an endpoint\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const nock = require('nock');}
\DoxyCodeLine{}
\DoxyCodeLine{nock('https://sindresorhus.com')}
\DoxyCodeLine{    .get('/')}
\DoxyCodeLine{    .reply(200, 'Hello world!');}
\DoxyCodeLine{}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    const response = await got('sindresorhus.com');}
\DoxyCodeLine{    console.log(response.body);}
\DoxyCodeLine{    //=> 'Hello world!'}
\DoxyCodeLine{\})();}
\end{DoxyCode}


If you need real integration tests you can use \href{https://github.com/lukechilds/create-test-server}{\texttt{ {\ttfamily create-\/test-\/server}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const createTestServer = require('create-\/test-\/server');}
\DoxyCodeLine{}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    const server = await createTestServer();}
\DoxyCodeLine{    server.get('/', 'Hello world!');}
\DoxyCodeLine{}
\DoxyCodeLine{    const response = await got(server.url);}
\DoxyCodeLine{    console.log(response.body);}
\DoxyCodeLine{    //=> 'Hello world!'}
\DoxyCodeLine{}
\DoxyCodeLine{    await server.close();}
\DoxyCodeLine{\})();}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1439}{}\doxysubsection{Tips}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1439}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1440}{}\doxysubsubsection{User Agent}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1440}
It\textquotesingle{}s a good idea to set the `\textquotesingle{}user-\/agent'{\ttfamily header so the provider can more easily see how their resource is used. By default, it\textquotesingle{}s the U\+RL to this repo. You can omit this header by setting it to}null\`{}.

\`{}\`{}`js const got = require(\textquotesingle{}got'); const pkg = require(\textquotesingle{}./package.json\textquotesingle{});

got(\textquotesingle{}sindresorhus.\+com\textquotesingle{}, \{ headers\+: \{ \textquotesingle{}user-\/agent\textquotesingle{}\+: {\ttfamily my-\/package/\$\{pkg.\+version\} (\href{https://github.com/username/my-package}{\texttt{ https\+://github.\+com/username/my-\/package}})} \} \});

got(\textquotesingle{}sindresorhus.\+com\textquotesingle{}, \{ headers\+: \{ \textquotesingle{}user-\/agent\textquotesingle{}\+: null \} \}); \`{}\`{}\`{}\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1441}{}\doxysubsubsection{304 Responses}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1441}
Bear in mind; if you send an {\ttfamily if-\/modified-\/since} header and receive a {\ttfamily 304 Not Modified} response, the body will be empty. It\textquotesingle{}s your responsibility to cache and retrieve the body contents.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1442}{}\doxysubsubsection{Custom endpoints}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1442}
Use {\ttfamily got.\+extend()} to make it nicer to work with R\+E\+ST A\+P\+Is. Especially if you use the {\ttfamily base\+Url} option.

{\bfseries{Note\+:}} Not to be confused with \`{}got.create()\`{}, which has no defaults.

\`{}\`{}`js const got = require(\textquotesingle{}got'); const pkg = require(\textquotesingle{}./package.json\textquotesingle{});

const custom = got.\+extend(\{ base\+Url\+: \textquotesingle{}example.\+com\textquotesingle{}, json\+: true, headers\+: \{ \textquotesingle{}user-\/agent\textquotesingle{}\+: {\ttfamily my-\/package/\$\{pkg.\+version\} (\href{https://github.com/username/my-package}{\texttt{ https\+://github.\+com/username/my-\/package}})} \} \});

// Use {\ttfamily custom} exactly how you use {\ttfamily got} (async () =$>$ \{ const list = await custom(\textquotesingle{}/v1/users/list\textquotesingle{}); \})(); 
\begin{DoxyCode}{0}
\DoxyCodeLine{**Tip:** Need to merge some instances into a single one? Check out [`got.mergeInstances()`](advanced-\/creation.md\#merging-\/instances).}
\DoxyCodeLine{}
\DoxyCodeLine{\#\#\# Experimental HTTP2 support}
\DoxyCodeLine{}
\DoxyCodeLine{Got provides an experimental support for HTTP2 using the [`http2-\/wrapper`](https://github.com/szmarczak/http2-\/wrapper) package:}
\DoxyCodeLine{}
\DoxyCodeLine{```js}
\DoxyCodeLine{const got = require('got');}
\DoxyCodeLine{const \{request\} = require('http2-\/wrapper');}
\DoxyCodeLine{}
\DoxyCodeLine{const h2got = got.extend(\{request\});}
\DoxyCodeLine{}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    const \{body\} = await h2got('https://nghttp2.org/httpbin/headers');}
\DoxyCodeLine{    console.log(body);}
\DoxyCodeLine{\})();}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1443}{}\doxysubsection{Comparison}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1443}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{6}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily got} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/request/request}{\texttt{ {\ttfamily request}}} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/bitinn/node-fetch}{\texttt{ {\ttfamily node-\/fetch}}} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/axios/axios}{\texttt{ {\ttfamily axios}}} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/visionmedia/superagent}{\texttt{ {\ttfamily superagent}}}  }\\\cline{1-6}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ {\ttfamily got} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/request/request}{\texttt{ {\ttfamily request}}} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/bitinn/node-fetch}{\texttt{ {\ttfamily node-\/fetch}}} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/axios/axios}{\texttt{ {\ttfamily axios}}} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/visionmedia/superagent}{\texttt{ {\ttfamily superagent}}}  }\\\cline{1-6}
\endhead
H\+T\+T\+P/2 support &\PBS\centering ❔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✔$\ast$$\ast$  \\\cline{1-6}
Browser support &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✔$\ast$ &\PBS\centering ✔ &\PBS\centering ✔  \\\cline{1-6}
Electron support &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖  \\\cline{1-6}
Promise A\+PI &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔  \\\cline{1-6}
Stream A\+PI &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering Node.\+js only &\PBS\centering ✖ &\PBS\centering ✔  \\\cline{1-6}
Request cancelation &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔  \\\cline{1-6}
R\+FC compliant caching &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖  \\\cline{1-6}
Cookies (out-\/of-\/box) &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖  \\\cline{1-6}
Follows redirects &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔  \\\cline{1-6}
Retries on failure &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✔  \\\cline{1-6}
Progress events &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering Browser only &\PBS\centering ✔  \\\cline{1-6}
Handles gzip/deflate &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✔  \\\cline{1-6}
Advanced timeouts &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖  \\\cline{1-6}
Timings &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖  \\\cline{1-6}
Errors with metadata &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✔ &\PBS\centering ✖  \\\cline{1-6}
J\+S\+ON mode &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✔ &\PBS\centering ✔  \\\cline{1-6}
Custom defaults &\PBS\centering ✔ &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✔ &\PBS\centering ✖  \\\cline{1-6}
Composable &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✔  \\\cline{1-6}
Hooks &\PBS\centering ✔ &\PBS\centering ✖ &\PBS\centering ✖ &\PBS\centering ✔ &\PBS\centering ✖  \\\cline{1-6}
Issues open &\PBS\centering \href{https://github.com/sindresorhus/got/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc}{\texttt{ }} &\PBS\centering \href{https://github.com/request/request/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc}{\texttt{ }} &\PBS\centering \href{https://github.com/bitinn/node-fetch/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc}{\texttt{ }} &\PBS\centering \href{https://github.com/axios/axios/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc}{\texttt{ }} &\PBS\centering \href{https://github.com/visionmedia/superagent/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc}{\texttt{ }}  \\\cline{1-6}
Issues closed &\PBS\centering \href{https://github.com/sindresorhus/got/issues?q=is\%3Aissue+is\%3Aclosed+sort\%3Aupdated-desc}{\texttt{ }} &\PBS\centering \href{https://github.com/request/request/issues?q=is\%3Aissue+is\%3Aclosed+sort\%3Aupdated-desc}{\texttt{ }} &\PBS\centering \href{https://github.com/bitinn/node-fetch/issues?q=is\%3Aissue+is\%3Aclosed+sort\%3Aupdated-desc}{\texttt{ }} &\PBS\centering \href{https://github.com/axios/axios/issues?q=is\%3Aissue+is\%3Aclosed+sort\%3Aupdated-desc}{\texttt{ }} &\PBS\centering \href{https://github.com/visionmedia/superagent/issues?q=is\%3Aissue+is\%3Aclosed+sort\%3Aupdated-desc}{\texttt{ }}  \\\cline{1-6}
Downloads &\PBS\centering \href{https://www.npmjs.com/package/got}{\texttt{ }} &\PBS\centering \href{https://www.npmjs.com/package/request}{\texttt{ }} &\PBS\centering \href{https://www.npmjs.com/package/node-fetch}{\texttt{ }} &\PBS\centering \href{https://www.npmjs.com/package/axios}{\texttt{ }} &\PBS\centering \href{https://www.npmjs.com/package/superagent}{\texttt{ }}  \\\cline{1-6}
Coverage &\PBS\centering \href{https://coveralls.io/github/sindresorhus/got}{\texttt{ }} &\PBS\centering \href{https://coveralls.io/github/request/request}{\texttt{ }} &\PBS\centering \href{https://coveralls.io/github/bitinn/node-fetch}{\texttt{ }} &\PBS\centering \href{https://coveralls.io/github/mzabriskie/axios}{\texttt{ }} &\PBS\centering unknown  \\\cline{1-6}
Build &\PBS\centering \href{https://travis-ci.org/sindresorhus/got}{\texttt{ }} &\PBS\centering \href{https://travis-ci.org/request/request}{\texttt{ }} &\PBS\centering \href{https://travis-ci.org/bitinn/node-fetch}{\texttt{ }} &\PBS\centering \href{https://travis-ci.org/axios/axios}{\texttt{ }} &\PBS\centering \href{https://travis-ci.org/visionmedia/superagent}{\texttt{ }}  \\\cline{1-6}
Bugs &\PBS\centering \href{https://github.com/sindresorhus/got/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc+label\%3Abug}{\texttt{ }} &\PBS\centering $<$a href=\char`\"{}https\+://github.\+com/request/request/issues?q=is\%3\+Aissue+is\%3\+Aopen+sort\%3\+Aupdated-\/desc+label\%3\+A\char`\"{}Needs+investigation\char`\"{}\char`\"{}$>$ &\PBS\centering \href{https://github.com/bitinn/node-fetch/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc+label\%3Abug}{\texttt{ }} &\PBS\centering \href{https://github.com/axios/axios/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc+label\%3Abug}{\texttt{ }} &\PBS\centering \href{https://github.com/visionmedia/superagent/issues?q=is\%3Aissue+is\%3Aopen+sort\%3Aupdated-desc+label\%3ABug}{\texttt{ }}  \\\cline{1-6}
Dependents &\PBS\centering \href{https://www.npmjs.com/package/got?activeTab=dependents}{\texttt{ }} &\PBS\centering \href{https://www.npmjs.com/package/request?activeTab=dependents}{\texttt{ }} &\PBS\centering \href{https://www.npmjs.com/package/node-fetch?activeTab=dependents}{\texttt{ }} &\PBS\centering \href{https://www.npmjs.com/package/axios?activeTab=dependents}{\texttt{ }} &\PBS\centering \href{https://www.npmjs.com/package/visionmedia?activeTab=dependents}{\texttt{ }}  \\\cline{1-6}
Install size &\PBS\centering \href{https://packagephobia.now.sh/result?p=got}{\texttt{ }} &\PBS\centering \href{https://packagephobia.now.sh/result?p=request}{\texttt{ }} &\PBS\centering \href{https://packagephobia.now.sh/result?p=node-fetch}{\texttt{ }} &\PBS\centering \href{https://packagephobia.now.sh/result?p=axios}{\texttt{ }} &\PBS\centering \href{https://packagephobia.now.sh/result?p=superagent}{\texttt{ }}  \\\cline{1-6}
\end{longtabu}



\begin{DoxyItemize}
\item It\textquotesingle{}s almost A\+PI compatible with the browser {\ttfamily fetch} A\+PI.~\newline
 $\ast$$\ast$ Need to switch the protocol manually.~\newline
 ❔ Experimental support.
\end{DoxyItemize}\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1444}{}\doxysubsection{Related}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1444}

\begin{DoxyItemize}
\item \href{https://github.com/sindresorhus/gh-got}{\texttt{ gh-\/got}} -\/ Got convenience wrapper to interact with the Git\+Hub A\+PI
\item \href{https://github.com/singapore/gl-got}{\texttt{ gl-\/got}} -\/ Got convenience wrapper to interact with the Git\+Lab A\+PI
\item \href{https://github.com/samverschueren/travis-got}{\texttt{ travis-\/got}} -\/ Got convenience wrapper to interact with the Travis A\+PI
\item \href{https://github.com/kevva/graphql-got}{\texttt{ graphql-\/got}} -\/ Got convenience wrapper to interact with Graph\+QL
\item \href{https://github.com/khaosdoctor/gotql}{\texttt{ Got\+QL}} -\/ Got convenience wrapper to interact with Graph\+QL using J\+S\+O\+N-\/parsed queries instead of strings
\end{DoxyItemize}\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1445}{}\doxysubsection{Maintainers}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1445}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{6}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://sindresorhus.com}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/floatdrop}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/AlexTes}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/lukechilds}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/szmarczak}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/brandon93s}{\texttt{ }}  }\\\cline{1-6}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://sindresorhus.com}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/floatdrop}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/AlexTes}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/lukechilds}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/szmarczak}{\texttt{ }} }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ \href{https://github.com/brandon93s}{\texttt{ }}  }\\\cline{1-6}
\endhead
\href{https://sindresorhus.com}{\texttt{ Sindre Sorhus}} &\href{https://github.com/floatdrop}{\texttt{ Vsevolod Strukchinsky}} &\href{https://alextes.me}{\texttt{ Alexander Tesfamichael}} &\href{https://github.com/lukechilds}{\texttt{ Luke Childs}} &\href{https://github.com/szmarczak}{\texttt{ Szymon Marczak}} &\href{https://github.com/brandon93s}{\texttt{ Brandon Smith}}  \\\cline{1-6}
\end{longtabu}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1446}{}\doxysubsection{License}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_got_readme_autotoc_md1446}
M\+IT 