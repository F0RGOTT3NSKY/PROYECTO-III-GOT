\href{https://npmjs.org/package/finalhandler}{\texttt{ }} \href{https://npmjs.org/package/finalhandler}{\texttt{ }} \href{https://nodejs.org/en/download}{\texttt{ }} \href{https://travis-ci.org/pillarjs/finalhandler}{\texttt{ }} \href{https://coveralls.io/r/pillarjs/finalhandler?branch=master}{\texttt{ }}

Node.\+js function to invoke as the final step to respond to H\+T\+TP request.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4708}{}\doxysection{Installation}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4708}
This is a \href{https://nodejs.org/en/}{\texttt{ Node.\+js}} module available through the \href{https://www.npmjs.com/}{\texttt{ npm registry}}. Installation is done using the \href{https://docs.npmjs.com/getting-started/installing-npm-packages-locally}{\texttt{ {\ttfamily npm install} command}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm install finalhandler}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4709}{}\doxysection{A\+PI}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4709}

\begin{DoxyCode}{0}
\DoxyCodeLine{var finalhandler = require('finalhandler')}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4710}{}\doxysubsection{finalhandler(req, res, \mbox{[}options\mbox{]})}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4710}
Returns function to be invoked as the final step for the given {\ttfamily req} and {\ttfamily res}. This function is to be invoked as {\ttfamily fn(err)}. If {\ttfamily err} is falsy, the handler will write out a 404 response to the {\ttfamily res}. If it is truthy, an error response will be written out to the {\ttfamily res}.

When an error is written, the following information is added to the response\+:


\begin{DoxyItemize}
\item The {\ttfamily res.\+status\+Code} is set from {\ttfamily err.\+status} (or {\ttfamily err.\+status\+Code}). If this value is outside the 4xx or 5xx range, it will be set to 500.
\item The {\ttfamily res.\+status\+Message} is set according to the status code.
\item The body will be the H\+T\+ML of the status code message if {\ttfamily env} is `\textquotesingle{}production'{\ttfamily , otherwise will be}err.\+stack$<$tt$>$.
\item Any headers specified in anerr.\+headers\`{} object.
\end{DoxyItemize}

The final handler will also unpipe anything from {\ttfamily req} when it is invoked.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4711}{}\doxysubsubsection{options.\+env}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4711}
By default, the environment is determined by {\ttfamily N\+O\+D\+E\+\_\+\+E\+NV} variable, but it can be overridden by this option.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4712}{}\doxysubsubsection{options.\+onerror}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4712}
Provide a function to be called with the {\ttfamily err} when it exists. Can be used for writing errors to a central location without excessive function generation. Called as {\ttfamily onerror(err, req, res)}.\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4713}{}\doxysection{Examples}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4713}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4714}{}\doxysubsection{always 404}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4714}

\begin{DoxyCode}{0}
\DoxyCodeLine{var finalhandler = require('finalhandler')}
\DoxyCodeLine{var http = require('http')}
\DoxyCodeLine{}
\DoxyCodeLine{var server = http.createServer(function (req, res) \{}
\DoxyCodeLine{  var done = finalhandler(req, res)}
\DoxyCodeLine{  done()}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{server.listen(3000)}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4715}{}\doxysubsection{perform simple action}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4715}

\begin{DoxyCode}{0}
\DoxyCodeLine{var finalhandler = require('finalhandler')}
\DoxyCodeLine{var fs = require('fs')}
\DoxyCodeLine{var http = require('http')}
\DoxyCodeLine{}
\DoxyCodeLine{var server = http.createServer(function (req, res) \{}
\DoxyCodeLine{  var done = finalhandler(req, res)}
\DoxyCodeLine{}
\DoxyCodeLine{  fs.readFile('index.html', function (err, buf) \{}
\DoxyCodeLine{    if (err) return done(err)}
\DoxyCodeLine{    res.setHeader('Content-\/Type', 'text/html')}
\DoxyCodeLine{    res.end(buf)}
\DoxyCodeLine{  \})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{server.listen(3000)}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4716}{}\doxysubsection{use with middleware-\/style functions}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4716}

\begin{DoxyCode}{0}
\DoxyCodeLine{var finalhandler = require('finalhandler')}
\DoxyCodeLine{var http = require('http')}
\DoxyCodeLine{var serveStatic = require('serve-\/static')}
\DoxyCodeLine{}
\DoxyCodeLine{var serve = serveStatic('public')}
\DoxyCodeLine{}
\DoxyCodeLine{var server = http.createServer(function (req, res) \{}
\DoxyCodeLine{  var done = finalhandler(req, res)}
\DoxyCodeLine{  serve(req, res, done)}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{server.listen(3000)}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4717}{}\doxysubsection{keep log of all errors}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4717}

\begin{DoxyCode}{0}
\DoxyCodeLine{var finalhandler = require('finalhandler')}
\DoxyCodeLine{var fs = require('fs')}
\DoxyCodeLine{var http = require('http')}
\DoxyCodeLine{}
\DoxyCodeLine{var server = http.createServer(function (req, res) \{}
\DoxyCodeLine{  var done = finalhandler(req, res, \{ onerror: logerror \})}
\DoxyCodeLine{}
\DoxyCodeLine{  fs.readFile('index.html', function (err, buf) \{}
\DoxyCodeLine{    if (err) return done(err)}
\DoxyCodeLine{    res.setHeader('Content-\/Type', 'text/html')}
\DoxyCodeLine{    res.end(buf)}
\DoxyCodeLine{  \})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{server.listen(3000)}
\DoxyCodeLine{}
\DoxyCodeLine{function logerror (err) \{}
\DoxyCodeLine{  console.error(err.stack || err.toString())}
\DoxyCodeLine{\}}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4718}{}\doxysection{License}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_finalhandler__r_e_a_d_m_e_autotoc_md4718}
\mbox{[}M\+IT\mbox{]}(L\+I\+C\+E\+N\+SE) 