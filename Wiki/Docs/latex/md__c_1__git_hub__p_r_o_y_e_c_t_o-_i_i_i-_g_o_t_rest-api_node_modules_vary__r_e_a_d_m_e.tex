\href{https://npmjs.org/package/vary}{\texttt{ }} \href{https://npmjs.org/package/vary}{\texttt{ }} \href{https://nodejs.org/en/download}{\texttt{ }} \href{https://travis-ci.org/jshttp/vary}{\texttt{ }} \href{https://coveralls.io/r/jshttp/vary}{\texttt{ }}

Manipulate the H\+T\+TP Vary header\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3367}{}\doxysection{Installation}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3367}
This is a \href{https://nodejs.org/en/}{\texttt{ Node.\+js}} module available through the \href{https://www.npmjs.com/}{\texttt{ npm registry}}. Installation is done using the \href{https://docs.npmjs.com/getting-started/installing-npm-packages-locally}{\texttt{ {\ttfamily npm install} command}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm install vary}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3368}{}\doxysection{A\+PI}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3368}

\begin{DoxyCode}{0}
\DoxyCodeLine{var vary = require('vary')}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3369}{}\doxysubsection{vary(res, field)}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3369}
Adds the given header {\ttfamily field} to the {\ttfamily Vary} response header of {\ttfamily res}. This can be a string of a single field, a string of a valid {\ttfamily Vary} header, or an array of multiple fields.

This will append the header if not already listed, otherwise leaves it listed in the current location.


\begin{DoxyCode}{0}
\DoxyCodeLine{// Append "Origin" to the Vary header of the response}
\DoxyCodeLine{vary(res, 'Origin')}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3370}{}\doxysubsection{vary.\+append(header, field)}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3370}
Adds the given header {\ttfamily field} to the {\ttfamily Vary} response header string {\ttfamily header}. This can be a string of a single field, a string of a valid {\ttfamily Vary} header, or an array of multiple fields.

This will append the header if not already listed, otherwise leaves it listed in the current location. The new header string is returned.


\begin{DoxyCode}{0}
\DoxyCodeLine{// Get header string appending "Origin" to "Accept, User-\/Agent"}
\DoxyCodeLine{vary.append('Accept, User-\/Agent', 'Origin')}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3371}{}\doxysection{Examples}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3371}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3372}{}\doxysubsection{Updating the Vary header when content is based on it}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3372}

\begin{DoxyCode}{0}
\DoxyCodeLine{var http = require('http')}
\DoxyCodeLine{var vary = require('vary')}
\DoxyCodeLine{}
\DoxyCodeLine{http.createServer(function onRequest (req, res) \{}
\DoxyCodeLine{  // about to user-\/agent sniff}
\DoxyCodeLine{  vary(res, 'User-\/Agent')}
\DoxyCodeLine{}
\DoxyCodeLine{  var ua = req.headers['user-\/agent'] || ''}
\DoxyCodeLine{  var isMobile = /mobi|android|touch|mini/i.test(ua)}
\DoxyCodeLine{}
\DoxyCodeLine{  // serve site, depending on isMobile}
\DoxyCodeLine{  res.setHeader('Content-\/Type', 'text/html')}
\DoxyCodeLine{  res.end('You are (probably) ' + (isMobile ? '' : 'not ') + 'a mobile user')}
\DoxyCodeLine{\})}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3373}{}\doxysection{Testing}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3373}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm test}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3374}{}\doxysection{License}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api_node_modules_vary__r_e_a_d_m_e_autotoc_md3374}
\mbox{[}M\+IT\mbox{]}(L\+I\+C\+E\+N\+SE) 