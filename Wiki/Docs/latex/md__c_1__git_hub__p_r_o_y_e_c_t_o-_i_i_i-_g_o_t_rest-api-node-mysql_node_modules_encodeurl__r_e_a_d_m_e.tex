\href{https://npmjs.org/package/encodeurl}{\texttt{ }} \href{https://npmjs.org/package/encodeurl}{\texttt{ }} \href{https://nodejs.org/en/download}{\texttt{ }} \href{https://travis-ci.org/pillarjs/encodeurl}{\texttt{ }} \href{https://coveralls.io/r/pillarjs/encodeurl?branch=master}{\texttt{ }}

Encode a U\+RL to a percent-\/encoded form, excluding already-\/encoded sequences\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4335}{}\doxysection{Installation}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4335}
This is a \href{https://nodejs.org/en/}{\texttt{ Node.\+js}} module available through the \href{https://www.npmjs.com/}{\texttt{ npm registry}}. Installation is done using the \href{https://docs.npmjs.com/getting-started/installing-npm-packages-locally}{\texttt{ {\ttfamily npm install} command}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm install encodeurl}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4336}{}\doxysection{A\+PI}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4336}

\begin{DoxyCode}{0}
\DoxyCodeLine{var encodeUrl = require('encodeurl')}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4337}{}\doxysubsection{encode\+Url(url)}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4337}
Encode a U\+RL to a percent-\/encoded form, excluding already-\/encoded sequences.

This function will take an already-\/encoded U\+RL and encode all the non-\/\+U\+RL code points (as U\+T\+F-\/8 byte sequences). This function will not encode the \char`\"{}\%\char`\"{} character unless it is not part of a valid sequence ({\ttfamily \%20} will be left as-\/is, but {\ttfamily foo} will be encoded as {\ttfamily \%25foo}).

This encode is meant to be \char`\"{}safe\char`\"{} and does not throw errors. It will try as hard as it can to properly encode the given U\+RL, including replacing any raw, unpaired surrogate pairs with the Unicode replacement character prior to encoding.

This function is {\itshape similar} to the intrinsic function {\ttfamily encode\+U\+RI}, except it will not encode the {\ttfamily \%} character if that is part of a valid sequence, will not encode {\ttfamily \mbox{[}} and {\ttfamily \mbox{]}} (for I\+Pv6 hostnames) and will replace raw, unpaired surrogate pairs with the Unicode replacement character (instead of throwing).\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4338}{}\doxysection{Examples}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4338}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4339}{}\doxysubsection{Encode a U\+R\+L containing user-\/controled data}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4339}

\begin{DoxyCode}{0}
\DoxyCodeLine{var encodeUrl = require('encodeurl')}
\DoxyCodeLine{var escapeHtml = require('escape-\/html')}
\DoxyCodeLine{}
\DoxyCodeLine{http.createServer(function onRequest (req, res) \{}
\DoxyCodeLine{  // get encoded form of inbound url}
\DoxyCodeLine{  var url = encodeUrl(req.url)}
\DoxyCodeLine{}
\DoxyCodeLine{  // create html message}
\DoxyCodeLine{  var body = '<p>Location ' + escapeHtml(url) + ' not found</p>'}
\DoxyCodeLine{}
\DoxyCodeLine{  // send a 404}
\DoxyCodeLine{  res.statusCode = 404}
\DoxyCodeLine{  res.setHeader('Content-\/Type', 'text/html; charset=UTF-\/8')}
\DoxyCodeLine{  res.setHeader('Content-\/Length', String(Buffer.byteLength(body, 'utf-\/8')))}
\DoxyCodeLine{  res.end(body, 'utf-\/8')}
\DoxyCodeLine{\})}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4340}{}\doxysubsection{Encode a U\+R\+L for use in a header field}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4340}

\begin{DoxyCode}{0}
\DoxyCodeLine{var encodeUrl = require('encodeurl')}
\DoxyCodeLine{var escapeHtml = require('escape-\/html')}
\DoxyCodeLine{var url = require('url')}
\DoxyCodeLine{}
\DoxyCodeLine{http.createServer(function onRequest (req, res) \{}
\DoxyCodeLine{  // parse inbound url}
\DoxyCodeLine{  var href = url.parse(req)}
\DoxyCodeLine{}
\DoxyCodeLine{  // set new host for redirect}
\DoxyCodeLine{  href.host = 'localhost'}
\DoxyCodeLine{  href.protocol = 'https:'}
\DoxyCodeLine{  href.slashes = true}
\DoxyCodeLine{}
\DoxyCodeLine{  // create location header}
\DoxyCodeLine{  var location = encodeUrl(url.format(href))}
\DoxyCodeLine{}
\DoxyCodeLine{  // create html message}
\DoxyCodeLine{  var body = '<p>Redirecting to new site: ' + escapeHtml(location) + '</p>'}
\DoxyCodeLine{}
\DoxyCodeLine{  // send a 301}
\DoxyCodeLine{  res.statusCode = 301}
\DoxyCodeLine{  res.setHeader('Content-\/Type', 'text/html; charset=UTF-\/8')}
\DoxyCodeLine{  res.setHeader('Content-\/Length', String(Buffer.byteLength(body, 'utf-\/8')))}
\DoxyCodeLine{  res.setHeader('Location', location)}
\DoxyCodeLine{  res.end(body, 'utf-\/8')}
\DoxyCodeLine{\})}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4341}{}\doxysection{Testing}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4341}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm test}
\DoxyCodeLine{\$ npm run lint}
\end{DoxyCode}
\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4342}{}\doxysection{References}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4342}

\begin{DoxyItemize}
\item \href{https://tools.ietf.org/html/rfc3986}{\texttt{ R\+FC 3986\+: Uniform Resource Identifier (U\+RI)\+: Generic Syntax}}
\item \href{https://url.spec.whatwg.org/}{\texttt{ W\+H\+A\+T\+WG U\+RL Living Standard}}
\end{DoxyItemize}\hypertarget{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4343}{}\doxysection{License}\label{md__c_1__git_hub__p_r_o_y_e_c_t_o-_i_i_i-_g_o_t_rest-api-node-mysql_node_modules_encodeurl__r_e_a_d_m_e_autotoc_md4343}
\mbox{[}M\+IT\mbox{]}(L\+I\+C\+E\+N\+SE) 